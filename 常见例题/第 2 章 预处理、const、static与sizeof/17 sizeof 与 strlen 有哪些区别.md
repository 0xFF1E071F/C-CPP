# sizeof与strlen有哪些区别

考点：理解 sizeof 与 strlen 的区别

sizeof 是操作符，strlen是函数。

sizeof 操作符的结果类型是size_t，它在头文件中typedef为unsigned int类型，该类型保证能容纳实现所建立的最大对象的字节大小。

sizeof 可以用类型做参数，strlen只能用char*做参数，且必须是以`\0`结尾的。

数组做sizeof的参数不退化，传递给strlen就退化为指针了。


大部分编译程序在编译的时候sizeof就被计算过了，这就是sizeof(x)可以用来定义数组维数的原因。strlen的结果要在运行的时候才能计算出来，它用来计算字符串的长度，不是类型占内存的大小。

sizeof后如果是类型，必须加括弧；如果是变量名，可以不加括弧。这是因为sizeof是个操作符，而不是个函数。

在计算字符串数组的长度上有区别。例如，
```
1 char str[20] = "0123456789";
2 int a = strlen(str);
3 int b = sizeof(str);
```
a 计算的是以0x00结束的字符串的长度(不包括0x00结束符)，结果是10。
b 计算的则是分配的数组str[20]所占的内存空间的大小，不受里面存储内容的改变而改变，结果是20。

如果要计算指针指向的字符串的长度，则一定要使用strlen。例如，
```
1 char *ss = "0123456789";
2 int a = sizeof(ss);
3 int b = strlen(ss);
```
a 计算的是ss指针所占用的内存空间大小，结果是4。
b 计算的是ss指向的字符串的长度，结果是10。

